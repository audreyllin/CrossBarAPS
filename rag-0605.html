<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CROSSBAR | Audrey AI Assistant</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #FF8C00;  /* Warm orange */
            --primary-light: #FFA726;
            --primary-dark: #EF6C00;
            --secondary: #FFCA28; /* Complementary yellow */
            --text: #333333;
            --bg: #FFF8F0;       /* Soft yellow-orange */
            --card-bg: #FFFFFF;
            --border: #E0E0E0;
            --success: #4CAF50;
            --error: #F44336;
            --info: #2196F3;
            --doc-purple: #7E57C2;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--bg);
            color: var(--text);
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        
        /* Header styles */
        header {
            background: linear-gradient(90deg, var(--primary-dark), var(--primary));
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 0.8rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 700;
            font-size: 1.5rem;
            color: white;
        }
        
        .logo-icon {
            background: var(--secondary);
            color: var(--primary-dark);
            width: 36px;
            height: 36px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        nav ul {
            display: flex;
            gap: 1.5rem;
            list-style: none;
        }
        
        nav a {
            text-decoration: none;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 500;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }
        
        nav a:hover {
            color: white;
            transform: translateY(-2px);
        }
        
        /* Main container */
        .container {
            display: flex;
            flex: 1;
            max-width: 1600px;
            margin: 0 auto;
            width: 100%;
            min-height: 0;
        }
        
        /* Sidebar Navigation */
        .sidebar {
            width: 280px;
            background: linear-gradient(135deg, #2c1f00 0%, #3d2c00 100%);
            color: white;
            padding: 20px;
            display: flex;
            flex-direction: column;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .logo-icon-sidebar {
            font-size: 28px;
            color: var(--secondary);
        }
        
        .logo-text {
            font-size: 22px;
            font-weight: 700;
            color: var(--secondary);
        }
        
        .nav-section {
            margin-bottom: 30px;
        }
        
        .section-title {
            font-size: 14px;
            text-transform: uppercase;
            color: #ffd54f;
            margin-bottom: 15px;
            letter-spacing: 1px;
        }
        
        .nav-item {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            border-radius: 8px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .nav-item:hover {
            background: rgba(255, 167, 38, 0.1);
        }
        
        .nav-item.active {
            background: rgba(255, 167, 38, 0.2);
            border-left: 4px solid var(--secondary);
        }
        
        .nav-icon {
            font-size: 18px;
            margin-right: 12px;
            width: 24px;
            text-align: center;
            color: var(--secondary);
        }
        
        /* Main Content Area */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 20px;
        }
        
        /* Fixed header section */
        .fixed-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px 20px;
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            position: sticky;
            top: 80px; /* Below main header */
            z-index: 90;
            border: 1px solid var(--border);
        }
        
        .page-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--text);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .page-title i {
            color: var(--primary);
        }
        
        .user-controls {
            display: flex;
            gap: 15px;
        }
        
        .control-btn {
            background: var(--card-bg);
            border: 1px solid var(--border);
            padding: 8px 15px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .control-btn:hover {
            background: #f1f3f9;
            transform: translateY(-2px);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        /* Chat Container */
        .chat-container {
            display: flex;
            flex: 1;
            gap: 20px;
            min-height: 0;
            height: calc(100vh - 250px); /* Adjust based on fixed elements */
        }
        
        .chat-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            overflow: hidden;
            position: relative;
        }
        
        .chat-header {
            padding: 15px 20px;
            background: linear-gradient(90deg, var(--primary), var(--primary-dark));
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .chat-title {
            font-size: 18px;
            font-weight: 600;
        }
        
        .context-display {
            padding: 15px 20px;
            background: #f1f5ff;
            font-size: 14px;
            border-bottom: 1px solid var(--border);
            color: var(--text);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .clear-history {
            background: var(--error);
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
        }
        
        .clear-history:hover {
            background: #d32f2f;
        }
        
        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
            background: #fcf8f3;
        }
        
        .message {
            max-width: 85%;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .user-message {
            align-self: flex-end;
        }
        
        .bot-message {
            align-self: flex-start;
        }
        
        .message-content {
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            line-height: 1.5;
        }
        
        .user-message .message-content {
            background: var(--primary-light);
            color: white;
            border-bottom-right-radius: 3px;
        }
        
        .bot-message .message-content {
            background: #f8f8f8;
            border: 1px solid var(--border);
            border-bottom-left-radius: 3px;
        }
        
        .message-metadata {
            font-size: 12px;
            color: #777;
            margin-top: 5px;
            text-align: right;
        }
        
        .bot-message .message-metadata {
            text-align: left;
        }
        
        .feedback {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .feedback-btn {
            background: #f8f9fa;
            border: 1px solid var(--border);
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .feedback-btn:hover {
            background: #e9ecef;
        }
        
        .input-area {
            padding: 15px;
            border-top: 1px solid var(--border);
            background: white;
            position: sticky;
            bottom: 0;
            z-index: 10;
        }
        
        .input-container {
            display: flex;
            gap: 10px;
        }
        
        .user-input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 16px;
            resize: none;
            height: 50px;
            background: #fffdf9;
        }
        
        .user-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(255, 140, 0, 0.1);
        }
        
        .send-btn {
            background: var(--primary);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }
        
        .send-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .input-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        
        .input-btn {
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.2s;
        }
        
        .input-btn:hover {
            background: var(--primary-light);
            color: white;
            border-color: var(--primary-light);
            transform: translateY(-2px);
        }
        
        .input-btn.primary {
            background: var(--primary);
            color: white;
            border: none;
        }
        
        .input-btn.primary:hover {
            background: var(--primary-dark);
        }
        
        /* Right Panel */
        .right-panel {
            width: 350px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            max-height: 100%;
            overflow-y: auto;
        }
        
        .panel-card {
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            overflow: hidden;
        }
        
        .panel-header {
            padding: 15px 20px;
            background: #f8f9fa;
            border-bottom: 1px solid var(--border);
            font-weight: 600;
            position: sticky;
            top: 0;
            z-index: 80;
        }
        
        .panel-content {
            padding: 20px;
        }
        
        .docs-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .doc-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.2s ease;
            border: 1px solid var(--border);
        }
        
        .doc-item:hover {
            background: rgba(255, 140, 0, 0.05);
            border-color: var(--primary-light);
        }
        
        .doc-item.active {
            background: rgba(255, 140, 0, 0.1);
            border-left: 3px solid var(--primary);
        }
        
        .doc-icon {
            width: 36px;
            height: 36px;
            background: var(--primary);
            color: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .keywords-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }
        
        .keyword-item {
            background: #f8f9fa;
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 12px;
            transition: all 0.2s ease;
        }
        
        .keyword-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            border-color: var(--primary-light);
        }
        
        .keyword-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        
        .keyword-name {
            font-weight: 600;
            color: var(--primary);
        }
        
        .keyword-count {
            background: #fff3e0;
            color: var(--primary-dark);
            border-radius: 20px;
            padding: 2px 8px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .keyword-sections {
            font-size: 13px;
            color: #777;
        }
        
        .keyword-sections i {
            margin-right: 5px;
            color: var(--primary);
        }
        
        /* Upload prompt */
        .upload-prompt {
            background: #fff8e1;
            border: 1px solid var(--secondary);
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            animation: slideIn 0.5s ease;
        }
        
        .prompt-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            color: var(--primary-dark);
        }
        
        .prompt-content {
            margin-bottom: 15px;
        }
        
        .concept-list {
            margin: 10px 0 15px 20px;
        }
        
        .concept-list li {
            margin-bottom: 5px;
            color: var(--primary-dark);
        }
        
        .prompt-actions {
            display: flex;
            gap: 10px;
        }
        
        /* Follow-up suggestions */
        .follow-up-suggestion {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px dashed var(--border);
        }
        
        .suggestion-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--primary);
        }
        
        .suggestion-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .suggestion-item {
            background: #fff3e0;
            color: var(--primary-dark);
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .suggestion-item:hover {
            background: #ffe0b2;
        }
        
        .action-item {
            background: #fff8e1;
            color: var(--primary-dark);
            font-weight: 500;
        }
        
        .action-item:hover {
            background: #ffecb3;
        }
        
        /* Typing indicator */
        .typing-indicator {
            display: flex;
            gap: 6px;
            align-items: center;
            color: var(--primary);
            font-style: italic;
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            background: var(--primary);
            border-radius: 50%;
            animation: pulse 1.5s infinite;
        }
        
        .typing-dot:nth-child(2) {
            animation-delay: 0.5s;
        }
        
        .typing-dot:nth-child(3) {
            animation-delay: 1s;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 0.4; transform: scale(0.8); }
            50% { opacity: 1; transform: scale(1); }
        }
        
        /* Upload message */
        .upload-message {
            background: #f0f7ff;
            border-left: 4px solid var(--info);
            padding: 1rem;
            border-radius: 8px;
            margin: 0.5rem 0;
        }
        
        .upload-message.success {
            border-left-color: var(--success);
        }
        
        .upload-message.error {
            border-left-color: var(--error);
        }
        
        /* Document summary styles */
        .document-summary {
            background: #f0f7ff;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border-left: 3px solid var(--info);
        }
        
        .summary-header {
            font-weight: bold;
            margin-bottom: 8px;
            color: var(--primary-dark);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .summary-content {
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        /* Footer */
        footer {
            background: var(--card-bg);
            border-top: 1px solid var(--border);
            padding: 1.5rem;
            text-align: center;
            color: #666;
            font-size: 0.9rem;
            margin-top: auto;
        }
        
        .footer-links {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin-bottom: 0.8rem;
        }
        
        .footer-links a {
            color: var(--text);
            text-decoration: none;
            transition: color 0.2s;
        }
        
        .footer-links a:hover {
            color: var(--primary);
        }
        
        /* Responsive design */
        @media (max-width: 1200px) {
            .container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
            }
            
            .right-panel {
                width: 100%;
            }
        }

        @media (max-width: 768px) {
            .chat-container {
                flex-direction: column;
            }
            
            .keywords-grid {
                grid-template-columns: 1fr;
            }
            
            header {
                flex-direction: column;
                gap: 1rem;
            }
            
            nav ul {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .user-input {
                width: 100%;
            }
            
            .input-container {
                flex-direction: column;
            }
            
            .send-btn {
                width: 100%;
                padding: 0.8rem;
            }
            
            .fixed-header {
                top: 130px; /* Adjust for mobile header height */
            }
        }
        
        @keyframes slideIn {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .pulse {
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 0.6; }
            50% { opacity: 1; }
            100% { opacity: 0.6; }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <div class="logo-icon">
                <i class="fas fa-shield-alt"></i>
            </div>
            <span>CROSSBAR</span>
        </div>
        <nav>
            <ul>
                <li><a href="#"><i class="fas fa-newspaper"></i> News</a></li>
                <li><a href="#"><i class="fas fa-code"></i> Developer Portal</a></li>
                <li><a href="#" class="active"><i class="fas fa-robot"></i> Ask Audrey</a></li>
                <li><a href="#"><i class="fas fa-road"></i> Dev Tracks</a></li>
                <li><a href="#"><i class="fas fa-book"></i> Documentation</a></li>
                <li><a href="#"><i class="fab fa-github"></i> GitHub</a></li>
                <li><a href="#"><i class="fab fa-discord"></i> Discord</a></li>
            </ul>
        </nav>
    </header>
    
    <div class="container">
        <!-- Sidebar Navigation -->
        <div class="sidebar">
            <div class="logo-container">
                <div class="logo-icon-sidebar"><i class="fas fa-shield-alt"></i></div>
                <div class="logo-text">CROSSBAR</div>
            </div>
            
            <div class="nav-section">
                <div class="section-title">Navigation</div>
                <div class="nav-item active">
                    <div class="nav-icon"><i class="fas fa-comments"></i></div>
                    <div>Chat Assistant</div>
                </div>
                <div class="nav-item">
                    <div class="nav-icon"><i class="fas fa-database"></i></div>
                    <div>Document Library</div>
                </div>
                <div class="nav-item">
                    <div class="nav-icon"><i class="fas fa-chart-bar"></i></div>
                    <div>Analytics</div>
                </div>
                <div class="nav-item">
                    <div class="nav-icon"><i class="fas fa-cog"></i></div>
                    <div>Settings</div>
                </div>
            </div>
            
            <div class="nav-section">
                <div class="section-title">Tools</div>
                <div class="nav-item">
                    <div class="nav-icon"><i class="fas fa-file-import"></i></div>
                    <div>Document Upload</div>
                </div>
                <div class="nav-item">
                    <div class="nav-icon"><i class="fas fa-search"></i></div>
                    <div>Semantic Search</div>
                </div>
                <div class="nav-item">
                    <div class="nav-icon"><i class="fas fa-key"></i></div>
                    <div>Keyword Extraction</div>
                </div>
            </div>
            
            <div class="nav-section" style="margin-top: auto;">
                <div class="nav-item">
                    <div class="nav-icon"><i class="fas fa-question-circle"></i></div>
                    <div>Help & Support</div>
                </div>
                <div class="nav-item">
                    <div class="nav-icon"><i class="fas fa-sign-out-alt"></i></div>
                    <div>Logout</div>
                </div>
            </div>
        </div>
        
        <!-- Main Content Area -->
        <div class="main-content">
            <!-- Fixed header section -->
            <div class="fixed-header">
                <h1 class="page-title"><i class="fas fa-robot"></i> Audrey AI Assistant</h1>
                <div class="user-controls">
                    <div class="control-btn">
                        <i class="fas fa-history"></i>
                        <span>History</span>
                    </div>
                    <div class="control-btn">
                        <i class="fas fa-download"></i>
                        <span>Export</span>
                    </div>
                    <div class="control-btn">
                        <i class="fas fa-user"></i>
                        <span>Profile</span>
                    </div>
                </div>
            </div>
            
            <div class="chat-container">
                <!-- Chat Area -->
                <div class="chat-area">
                    <div class="chat-header">
                        <div class="chat-title">Audrey AI Assistant</div>
                        <div>Specialized in CROSSBAR products and crypto security</div>
                    </div>
                    
                    <div class="context-display">
                        <div>
                            <p><i class="fas fa-file-alt"></i> Active document: <strong>arXiv:2307.12874</strong></p>
                            <p><i class="fas fa-comment"></i> Last topic: <strong>Quantum-Resistant Algorithms</strong></p>
                            <div class="context-indicator">
                                <i class="fas fa-sync-alt"></i> Context maintained for follow-up questions
                            </div>
                        </div>
                        <button class="clear-history" id="clear-history">
                            <i class="fas fa-trash"></i> Clear History
                        </button>
                    </div>
                    
                    <div class="chat-messages" id="chat-messages">
                        <div class="message bot-message">
                            <div class="message-content">
                                <strong>Hello, I'm Audrey, your CROSSBAR AI Assistant.</strong>
                                <p>I specialize in CROSSBAR products and crypto wallet security. Here's what I can help with:</p>
                                <ul>
                                    <li>Answer questions about CROSSBAR hardware and software</li>
                                    <li>Analyze documents (PDF, TXT, DOCX) using our RAG system</li>
                                    <li>Maintain context for follow-up questions</li>
                                    <li>Communicate in multiple languages</li>
                                </ul>
                                <p>Try asking about post-quantum signature schemes or upload a document!</p>
                                
                                <div class="document-summary">
                                    <div class="summary-header">
                                        <i class="fas fa-file-alt"></i> Document Summary (arXiv:2307.12874)
                                    </div>
                                    <div class="summary-content">
                                        This paper discusses quantum-resistant cryptographic algorithms and their implementation in modern security systems. Key findings include the vulnerability of current cryptographic systems to quantum attacks and the effectiveness of lattice-based cryptography as a quantum-resistant solution.
                                    </div>
                                </div>
                            </div>
                            <div class="message-metadata">
                                Just now
                            </div>
                        </div>
                    </div>
                    
                    <div class="input-area">
                        <div class="input-container">
                            <textarea class="user-input" id="user-input" placeholder="Ask about post-quantum signature schemes or upload documents..."></textarea>
                            <button class="send-btn" id="send-btn">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                        <div class="input-actions">
                            <button class="input-btn" id="upload-btn">
                                <i class="fas fa-file-upload"></i> Upload Document
                            </button>
                            <button class="input-btn" id="paste-link-btn">
                                <i class="fas fa-link"></i> Paste Link
                            </button>
                            <button class="input-btn" id="company-info-btn">
                                <i class="fas fa-building"></i> Company Info
                            </button>
                            <select class="input-btn" id="language-selector" style="flex: 1;">
                                <option value="auto">üåê Auto-detect</option>
                                <option value="en">üá∫üá∏ English</option>
                                <option value="zh">üá®üá≥ ‰∏≠Êñá (Chinese)</option>
                                <option value="es">üá™üá∏ Espa√±ol (Spanish)</option>
                                <option value="fr">üá´üá∑ Fran√ßais (French)</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <!-- Right Panel -->
                <div class="right-panel">
                    <div class="panel-card">
                        <div class="panel-header">Active Documents</div>
                        <div class="panel-content">
                            <div class="docs-list" id="active-docs">
                                <div class="doc-item active" data-doc="arXiv:2307.12874">
                                    <div class="doc-icon">
                                        <i class="fas fa-globe"></i>
                                    </div>
                                    <div class="doc-info">
                                        <div class="doc-name">arXiv:2307.12874</div>
                                        <div class="doc-type">Research Paper</div>
                                    </div>
                                </div>
                                <div class="doc-item" data-doc="CROSSBAR Security Whitepaper">
                                    <div class="doc-icon">
                                        <i class="fas fa-file-pdf"></i>
                                    </div>
                                    <div class="doc-info">
                                        <div class="doc-name">CROSSBAR Security Whitepaper</div>
                                        <div class="doc-type">PDF Document</div>
                                    </div>
                                </div>
                                <div class="doc-item" data-doc="NIST Post-Quantum Report">
                                    <div class="doc-icon">
                                        <i class="fas fa-link"></i>
                                    </div>
                                    <div class="doc-info">
                                        <div class="doc-name">NIST Post-Quantum Report</div>
                                        <div class="doc-type">Website</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="panel-card">
                        <div class="panel-header">Document Keywords</div>
                        <div class="panel-content">
                            <div class="keywords-grid" id="keywords-display">
                                <div class="keyword-item">
                                    <div class="keyword-header">
                                        <div class="keyword-name">Quantum-Resistant</div>
                                        <div class="keyword-count">28 mentions</div>
                                    </div>
                                    <div class="keyword-sections">
                                        <i class="fas fa-file-alt"></i> Sections: 1.1, 3.1, 4.2
                                    </div>
                                </div>
                                <div class="keyword-item">
                                    <div class="keyword-header">
                                        <div class="keyword-name">Hardware Wallets</div>
                                        <div class="keyword-count">42 mentions</div>
                                    </div>
                                    <div class="keyword-sections">
                                        <i class="fas fa-file-alt"></i> Sections: 1.0, 3.4, 5.1
                                    </div>
                                </div>
                                <div class="keyword-item">
                                    <div class="keyword-header">
                                        <div class="keyword-name">Cryptography</div>
                                        <div class="keyword-count">35 mentions</div>
                                    </div>
                                    <div class="keyword-sections">
                                        <i class="fas fa-file-alt"></i> Sections: 2.3, 4.2
                                    </div>
                                </div>
                                <div class="keyword-item">
                                    <div class="keyword-header">
                                        <div class="keyword-name">Security</div>
                                        <div class="keyword-count">47 mentions</div>
                                    </div>
                                    <div class="keyword-sections">
                                        <i class="fas fa-file-alt"></i> Sections: 3.2, 4.1, 5.3
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="panel-card">
                        <div class="panel-header">RAG Processing</div>
                        <div class="panel-content">
                            <div style="display: flex; flex-direction: column; gap: 15px;">
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <div style="background: #e3f2fd; width: 30px; height: 30px; border-radius: 6px; display: flex; align-items: center; justify-content: center;">
                                        <i class="fas fa-cloud-download-alt" style="color: var(--primary);"></i>
                                    </div>
                                    <div>
                                        <div style="font-weight: 500;">Content Retrieval</div>
                                        <div style="font-size: 13px; color: var(--text);">Scraping & extracting document content</div>
                                    </div>
                                </div>
                                
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <div style="background: #e3f2fd; width: 30px; height: 30px; border-radius: 6px; display: flex; align-items: center; justify-content: center;">
                                        <i class="fas fa-cube" style="color: var(--primary);"></i>
                                    </div>
                                    <div>
                                        <div style="font-weight: 500;">Vector Embeddings</div>
                                        <div style="font-size: 13px; color: var(--text);">Creating semantic representations</div>
                                    </div>
                                </div>
                                
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <div style="background: #e3f2fd; width: 30px; height: 30px; border-radius: 6px; display: flex; align-items: center; justify-content: center;">
                                        <i class="fas fa-search" style="color: var(--primary);"></i>
                                    </div>
                                    <div>
                                        <div style="font-weight: 500;">Similarity Search</div>
                                        <div style="font-size: 13px; color: var(--text);">FAISS-based retrieval</div>
                                    </div>
                                </div>
                                
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <div style="background: #e3f2fd; width: 30px; height: 30px; border-radius: 6px; display: flex; align-items: center; justify-content: center;">
                                        <i class="fas fa-brain" style="color: var(--primary);"></i>
                                    </div>
                                    <div>
                                        <div style="font-weight: 500;">Response Generation</div>
                                        <div style="font-size: 13px; color: var(--text);">Context-aware LLM synthesis</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <footer>
        <div class="footer-links">
            <a href="#">Legal</a>
            <a href="#">Privacy Policy</a>
            <a href="#">Terms</a>
            <a href="https://www.crossbar-inc.com/company/contact/" target="_blank">Contact</a>
        </div>
        <p>¬© 2025 CROSSBAR Inc. All rights reserved.</p>
        <p><small>"Audrey" is a proprietary AI for CROSSBAR developers, powered by advanced RAG systems.</small></p>
    </footer>

    <!-- Hidden file input -->
    <input type="file" id="file-upload" style="display: none;">

    <script>
        // Configuration
        const API_BASE_URL = 'https://your-backend-api.com';
        
        // Document knowledge base
        const documentKnowledge = {
            "arXiv:2307.12874": {
                abstract: "This paper presents a comprehensive analysis of quantum-resistant cryptographic algorithms. We evaluate several post-quantum signature schemes including lattice-based, hash-based, and multivariate approaches. Our findings indicate that lattice-based cryptography provides the best balance of security and performance for hardware implementations.",
                conclusion: "Quantum computing poses a significant threat to current cryptographic systems. Our research demonstrates that lattice-based cryptography, specifically CRYSTALS-Dilithium, offers a practical solution for quantum-resistant security. Future work will focus on optimizing these algorithms for embedded systems like hardware wallets.",
                keywords: ["quantum-resistant", "cryptography", "lattice-based", "security", "post-quantum"],
                sections: ["Introduction", "Quantum Threat Analysis", "Algorithm Evaluation", "Hardware Implementation", "Conclusion"]
            },
            "CROSSBAR Security Whitepaper": {
                abstract: "This whitepaper details the security architecture of CROSSBAR hardware wallets. We implement multiple layers of protection including secure elements, biometric authentication, and tamper-resistant design. Our approach exceeds industry standards for cryptocurrency storage.",
                conclusion: "CROSSBAR's security architecture provides unprecedented protection for digital assets. By combining hardware security modules with advanced cryptographic protocols, we create a solution that resists both physical and remote attacks. Future updates will incorporate quantum-resistant algorithms.",
                keywords: ["hardware wallet", "security", "cryptocurrency", "biometric", "tamper-resistant"],
                sections: ["Architecture Overview", "Secure Element", "Authentication", "Cryptography", "Future Development"]
            },
            "NIST Post-Quantum Report": {
                abstract: "This report summarizes NIST's evaluation of post-quantum cryptographic algorithms. After multiple rounds of analysis, four algorithms have been selected for standardization: CRYSTALS-Kyber, CRYSTALS-Dilithium, FALCON, and SPHINCS+.",
                conclusion: "The transition to post-quantum cryptography is essential for long-term security. NIST recommends organizations begin planning their migration to quantum-resistant algorithms. The selected standards provide a solid foundation for secure communications in the quantum era.",
                keywords: ["NIST", "post-quantum", "cryptography", "standardization", "quantum-resistant"],
                sections: ["Evaluation Process", "Selected Algorithms", "Implementation Considerations", "Migration Strategy"]
            }
        };
        
        // DOM Elements
        const chatMessages = document.getElementById('chat-messages');
        const userInput = document.getElementById('user-input');
        const sendBtn = document.getElementById('send-btn');
        const uploadBtn = document.getElementById('upload-btn');
        const fileUpload = document.getElementById('file-upload');
        const pasteLinkBtn = document.getElementById('paste-link-btn');
        const companyInfoBtn = document.getElementById('company-info-btn');
        const languageSelector = document.getElementById('language-selector');
        const activeDocs = document.getElementById('active-docs');
        const keywordsDisplay = document.getElementById('keywords-display');
        const clearHistoryBtn = document.getElementById('clear-history');
        
        // Initialize event listeners
        sendBtn.addEventListener('click', sendMessage);
        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });
        
        uploadBtn.addEventListener('click', () => fileUpload.click());
        pasteLinkBtn.addEventListener('click', promptForLink);
        companyInfoBtn.addEventListener('click', fetchCompanyInfo);
        fileUpload.addEventListener('change', handleFileUpload);
        clearHistoryBtn.addEventListener('click', clearChatHistory);
        
        // Initialize application
        window.onload = function() {
            // Add sample documents to UI
            const sampleDocs = [
                { id: "doc-001", name: "arXiv:2307.12874", type: "research_paper" },
                { id: "doc-002", name: "CROSSBAR Security Whitepaper", type: "whitepaper" },
                { id: "doc-003", name: "NIST Post-Quantum Report", type: "website" }
            ];
            
            sampleDocs.forEach(doc => addDocumentToUI(doc));
            
            // Set first document as active
            document.querySelector('.doc-item').classList.add('active');
        };

        // Helper functions
        function addDocumentToUI(doc) {
            const docItem = document.createElement('div');
            docItem.className = 'doc-item';
            docItem.dataset.docId = doc.id;
            docItem.innerHTML = `
                <div class="doc-icon">${getFileIcon(doc.name)}</div>
                <div class="doc-info">
                    <div class="doc-name">${doc.name}</div>
                    <div class="doc-type">${getDocType(doc.name)}</div>
                </div>
            `;
            
            docItem.addEventListener('click', () => {
                document.querySelectorAll('.doc-item').forEach(el => el.classList.remove('active'));
                docItem.classList.add('active');
                
                // Update context
                updateContextDisplay(doc.name);
                
                // Update keywords display
                updateKeywords(doc.name);
                
                // Show status message
                addMessage('bot', {
                    text: `Now focusing on <strong>${doc.name}</strong>. Ask me anything about this document.`,
                    type: 'status'
                });
                
                // Add document summary
                if (documentKnowledge[doc.name]) {
                    addDocumentSummary(doc.name);
                }
            });
            
            activeDocs.appendChild(docItem);
        }
        
        function getDocType(filename) {
            if (filename.includes('arXiv')) return 'Research Paper';
            if (filename.includes('Whitepaper')) return 'PDF Document';
            if (filename.includes('NIST')) return 'Official Report';
            return 'Document';
        }

        function getFileIcon(filename) {
            if (filename.includes('arXiv')) return '<i class="fas fa-globe"></i>';
            if (filename.includes('Whitepaper')) return '<i class="fas fa-file-pdf"></i>';
            if (filename.includes('NIST')) return '<i class="fas fa-link"></i>';
            return '<i class="fas fa-file"></i>';
        }

        // Core functionality
        function sendMessage() {
            const message = userInput.value.trim();
            if (!message) return;
            
            // Add user message to history
            addMessage('user', message);
            userInput.value = '';
            
            // Show typing indicator
            const typingIndicator = showTypingIndicator();
            
            // Simulate response after delay
            setTimeout(() => {
                chatMessages.removeChild(typingIndicator);
                
                // Generate response using RAG simulation
                const response = simulateRAGResponse(message);
                addMessage('bot', {
                    text: response,
                    type: 'document',
                    suggestions: generateDynamicSuggestions()
                });
            }, 1500);
        }
        
        function simulateRAGResponse(query) {
            const activeDoc = document.querySelector('.doc-item.active .doc-name').textContent;
            const docData = documentKnowledge[activeDoc] || {};
            
            // Simulate RAG processing
            let response = '';
            
            if (query.toLowerCase().includes('abstract')) {
                response = `<strong>Abstract from ${activeDoc}:</strong><br>${docData.abstract || 'Abstract not available for this document.'}`;
            }
            else if (query.toLowerCase().includes('conclusion')) {
                response = `<strong>Conclusion from ${activeDoc}:</strong><br>${docData.conclusion || 'Conclusion not available for this document.'}`;
            }
            else if (query.toLowerCase().includes('section') || query.toLowerCase().includes('content')) {
                response = `<strong>Document Sections for ${activeDoc}:</strong><br>${docData.sections ? docData.sections.join(', ') : 'Section data not available.'}`;
            }
            else {
                // Simulate semantic search
                const keywords = docData.keywords || [];
                const matchedKeywords = keywords.filter(kw => 
                    query.toLowerCase().includes(kw.toLowerCase())
                );
                
                if (matchedKeywords.length > 0) {
                    response = `Based on ${activeDoc}, here's what I found about ${matchedKeywords.join(', ')}:<br>`;
                    matchedKeywords.forEach(kw => {
                        response += `<br><strong>${kw}:</strong> `;
                        response += getKeywordExplanation(kw, activeDoc);
                    });
                } else {
                    // Default response
                    const responses = [
                        `Quantum-resistant algorithms are cryptographic systems that are secure against attacks by quantum computers. CROSSBAR uses lattice-based cryptography which is considered one of the most promising approaches. Our hardware wallets implement CRYSTALS-Dilithium for signatures and Kyber for key encapsulation.`,
                        `Hardware wallets provide the highest level of security for cryptocurrency storage. CROSSBAR wallets feature EAL6+ certified secure elements, biometric authentication, and tamper-resistant design. Our security whitepaper details the multi-layered approach we take to protect your digital assets.`,
                        `Post-quantum cryptography is essential for future-proofing blockchain security. The NIST standardization process has identified several promising algorithms, with lattice-based schemes being particularly suitable for embedded systems like hardware wallets due to their efficiency.`,
                        `CROSSBAR's security architecture uses a defense-in-depth approach. We combine hardware security modules, secure boot, encrypted storage, and remote attestation to create a comprehensive security solution. Our approach exceeds industry standards for cryptocurrency storage.`
                    ];
                    
                    const randomIndex = Math.floor(Math.random() * responses.length);
                    response = responses[randomIndex];
                }
            }
            
            return response;
        }
        
        function getKeywordExplanation(keyword, docName) {
            const explanations = {
                "quantum-resistant": "Refers to cryptographic algorithms that are secure against attacks by quantum computers. These algorithms are based on mathematical problems that are believed to be difficult for quantum computers to solve.",
                "cryptography": "The practice and study of techniques for secure communication in the presence of adversaries. Modern cryptography includes symmetric-key, asymmetric-key, and hash functions.",
                "lattice-based": "A type of cryptography based on the hardness of lattice problems. Lattice-based cryptography is considered a leading candidate for post-quantum security.",
                "security": "In the context of hardware wallets, security refers to the protection of private keys and resistance to physical and remote attacks.",
                "post-quantum": "Cryptographic algorithms designed to be secure against attacks by both classical and quantum computers.",
                "hardware wallet": "A physical device designed to securely store cryptocurrency private keys offline.",
                "biometric": "Authentication method that uses unique biological characteristics such as fingerprints or facial recognition.",
                "tamper-resistant": "Designed to resist physical attacks and make unauthorized access extremely difficult."
            };
            
            return explanations[keyword] || `I found references to "${keyword}" in ${docName}, but no detailed explanation is available. Would you like me to search for more information?`;
        }

        function showTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message bot-message';
            typingDiv.innerHTML = `
                <div class="message-content">
                    <div class="typing-indicator">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <span>Analyzing document content...</span>
                    </div>
                </div>
            `;
            chatMessages.appendChild(typingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            return typingDiv;
        }
        
        function addMessage(sender, content) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}-message`;
            
            const now = new Date();
            const timeString = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            
            if (sender === 'user') {
                messageDiv.innerHTML = `
                    <div class="message-content">
                        <strong>${content}</strong>
                    </div>
                    <div class="message-metadata">
                        ${timeString}
                    </div>
                `;
            } else {
                let messageContent = content.text;
                
                messageDiv.innerHTML = `
                    <div class="message-content">
                        ${messageContent}
                    </div>
                    ${content.type !== 'status' ? `
                    <div class="feedback">
                        <button class="feedback-btn" onclick="rateResponse(this, true)">
                            <i class="fas fa-thumbs-up"></i> Helpful
                        </button>
                        <button class="feedback-btn" onclick="rateResponse(this, false)">
                            <i class="fas fa-thumbs-down"></i> Not helpful
                        </button>
                    </div>
                    ` : ''}
                    <div class="message-metadata">
                        ${timeString}
                    </div>
                `;
                
                // Add follow-up suggestions for document responses
                if (content.type === 'document' && content.suggestions) {
                    let suggestionsHTML = '';
                    content.suggestions.forEach(s => {
                        if (typeof s === 'object' && s.isAction) {
                            suggestionsHTML += `
                                <div class="suggestion-item action-item" 
                                     onclick="handleRareConceptAction(['${s.concepts.join("','")}'])">
                                    <i class="fas fa-file-upload"></i> ${s.text}
                                </div>`;
                        } else {
                            suggestionsHTML += `
                                <div class="suggestion-item" onclick="followUpSuggestion('${s}')">
                                    ${s}
                                </div>`;
                        }
                    });
                    
                    messageDiv.innerHTML += `
                        <div class="follow-up-suggestion">
                            <div class="suggestion-title">Follow-up suggestions:</div>
                            <div class="suggestion-list">
                                ${suggestionsHTML}
                            </div>
                        </div>
                    `;
                }
            }
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function generateDynamicSuggestions() {
            const activeDoc = document.querySelector('.doc-item.active .doc-name').textContent;
            const docData = documentKnowledge[activeDoc] || {};
            
            return [
                "What is the abstract of this document?",
                "Summarize the conclusion",
                "What are the main sections?",
                "Explain quantum-resistant cryptography",
                {
                    text: "Upload related document",
                    isAction: true,
                    concepts: ["quantum computing", "cryptography"]
                }
            ];
        }
        
        function addDocumentSummary(docName) {
            const docData = documentKnowledge[docName];
            if (!docData) return;
            
            const summaryDiv = document.createElement('div');
            summaryDiv.className = 'document-summary';
            summaryDiv.innerHTML = `
                <div class="summary-header">
                    <i class="fas fa-file-alt"></i> Document Summary (${docName})
                </div>
                <div class="summary-content">
                    ${docData.abstract || 'Summary not available for this document.'}
                </div>
            `;
            
            // Add to the first bot message or create a new one
            const firstBotMessage = document.querySelector('.bot-message');
            if (firstBotMessage) {
                firstBotMessage.querySelector('.message-content').appendChild(summaryDiv);
            }
        }

        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            // Show processing message
            showUploadMessage(`‚è≥ Processing "${file.name}"...`, true);
            
            // Simulate processing delay
            setTimeout(() => {
                // Create document object
                const docId = `doc-${Date.now()}`;
                const doc = {
                    id: docId,
                    name: file.name,
                    type: file.type.split('/')[1] || 'Document',
                    source: 'upload'
                };
                
                // Add to UI
                addDocumentToUI(doc);
                
                // Set as active context
                document.querySelectorAll('.doc-item').forEach(el => el.classList.remove('active'));
                const newDocItem = document.querySelector(`.doc-item[data-doc-id="${docId}"]`);
                if (newDocItem) newDocItem.classList.add('active');
                
                updateContextDisplay(doc.name);
                
                // Simulate document analysis
                documentKnowledge[doc.name] = {
                    abstract: "This document discusses advanced cryptographic techniques for hardware security modules. Key topics include key management, secure boot processes, and resistance to side-channel attacks.",
                    conclusion: "Implementing robust security measures in hardware requires a multi-layered approach. Future developments should focus on quantum-resistant algorithms and improved tamper detection mechanisms.",
                    keywords: ["cryptography", "hardware", "security", "key management", "side-channel"],
                    sections: ["Introduction", "Architecture", "Implementation", "Results", "Conclusion"]
                };
                
                // Update keywords
                updateKeywords(doc.name);
                
                // Show success message
                showUploadMessage(`‚úÖ Successfully processed "${file.name}"`, true);
                addMessage('bot', {
                    text: `I've processed the document <strong>${file.name}</strong>. Ask me questions about its content.`,
                    type: 'status'
                });
                
                // Add document summary
                addDocumentSummary(doc.name);
            }, 2000);
        }
        
        function promptForLink() {
            const url = prompt('Enter URL of document to analyze:', 'https://arxiv.org/pdf/2307.12874');
            if (!url) return;
            
            if (!url.startsWith('http')) {
                showUploadMessage('‚ùå Please enter a valid URL', false);
                return;
            }
            
            showUploadMessage(`‚è≥ Processing document from ${url}...`, true);
            
            setTimeout(() => {
                // Extract document name from URL
                const docName = url.split('/').pop().replace('.pdf', '') || "Web Document";
                
                // Create document object
                const docId = `doc-${Date.now()}`;
                const doc = {
                    id: docId,
                    name: docName,
                    type: "website",
                    source: url
                };
                
                // Add to UI
                addDocumentToUI(doc);
                
                // Set as active context
                document.querySelectorAll('.doc-item').forEach(el => el.classList.remove('active'));
                const newDocItem = document.querySelector(`.doc-item[data-doc-id="${docId}"]`);
                if (newDocItem) newDocItem.classList.add('active');
                
                updateContextDisplay(docName);
                
                // Simulate document analysis
                documentKnowledge[docName] = {
                    abstract: "This online resource provides up-to-date information about cryptographic standards and best practices. It includes guidelines for implementing secure systems and recommendations for algorithm selection.",
                    conclusion: "Staying current with cryptographic developments is essential for maintaining security. Resources like this provide valuable guidance for developers and security professionals.",
                    keywords: ["cryptography", "standards", "security", "implementation", "guidelines"],
                    sections: ["Introduction", "Standards", "Implementation", "Case Studies", "Resources"]
                };
                
                // Update keywords
                updateKeywords(docName);
                
                showUploadMessage(`‚úÖ Successfully analyzed document`, true);
                addMessage('bot', {
                    text: `Processed document from <a href="${url}" target="_blank">${url}</a>`,
                    type: 'status'
                });
                
                // Add document summary
                addDocumentSummary(docName);
            }, 1500);
        }
        
        function fetchCompanyInfo() {
            showUploadMessage(`‚è≥ Retrieving company information...`, true);
            
            setTimeout(() => {
                const companyInfo = {
                    name: "CROSSBAR Inc.",
                    founded: "2010",
                    headquarters: "Santa Clara, CA",
                    investors: "Artiman, Kleiner Perkins, Caufield & Byers, Northern Light",
                    contact: "info@crossbar-inc.com",
                    website: "https://www.crossbar-inc.com"
                };
                
                const response = `
                    <strong>Company Information:</strong>
                    <div style="margin-top: 0.8rem; background: #f8f8f8; padding: 1rem; border-radius: 8px;">
                        <p><strong>Name:</strong> ${companyInfo.name}</p>
                        <p><strong>Founded:</strong> ${companyInfo.founded}</p>
                        <p><strong>Headquarters:</strong> ${companyInfo.headquarters}</p>
                        <p><strong>Investors:</strong> ${companyInfo.investors}</p>
                        <p><strong>Contact:</strong> <a href="mailto:${companyInfo.contact}">${companyInfo.contact}</a></p>
                        <p><strong>Website:</strong> <a href="${companyInfo.website}" target="_blank">${companyInfo.website}</a></p>
                    </div>
                `;
                
                addMessage('bot', {
                    text: response,
                    type: 'company'
                });
            }, 1500);
        }
        
        function showUploadMessage(text, isSuccess) {
            const msgDiv = document.createElement('div');
            msgDiv.className = `upload-message ${isSuccess ? 'success' : 'error'}`;
            msgDiv.innerHTML = text;
            chatMessages.appendChild(msgDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // Remove after delay
            setTimeout(() => {
                if (msgDiv.parentNode) {
                    chatMessages.removeChild(msgDiv);
                }
            }, 5000);
        }

        function updateContextDisplay(docName) {
            const contextDisplay = document.querySelector('.context-display');
            if (contextDisplay) {
                contextDisplay.innerHTML = `
                    <div>
                        <p><i class="fas fa-file-alt"></i> Active document: <strong>${docName}</strong></p>
                        <p><i class="fas fa-comment"></i> Current topic: <strong>Document Analysis</strong></p>
                        <div class="context-indicator">
                            <i class="fas fa-sync-alt"></i> Context maintained for follow-up questions
                        </div>
                    </div>
                    <button class="clear-history" id="clear-history">
                        <i class="fas fa-trash"></i> Clear History
                    </button>
                `;
                
                // Reattach event listener
                document.getElementById('clear-history').addEventListener('click', clearChatHistory);
            }
        }
        
        function updateKeywords(docName) {
            const docData = documentKnowledge[docName];
            if (!docData || !docData.keywords) return;
            
            keywordsDisplay.innerHTML = '';
            
            // Create keyword items
            docData.keywords.forEach((keyword, index) => {
                const keywordItem = document.createElement('div');
                keywordItem.className = 'keyword-item';
                keywordItem.innerHTML = `
                    <div class="keyword-header">
                        <div class="keyword-name">${keyword}</div>
                        <div class="keyword-count">${Math.floor(Math.random() * 20) + 10} mentions</div>
                    </div>
                    <div class="keyword-sections">
                        <i class="fas fa-file-alt"></i> Sections: ${getRandomSections()}
                    </div>
                `;
                keywordsDisplay.appendChild(keywordItem);
            });
        }
        
        function getRandomSections() {
            const sections = [];
            const count = Math.floor(Math.random() * 3) + 1;
            for (let i = 0; i < count; i++) {
                sections.push(`${Math.floor(Math.random() * 5) + 1}.${Math.floor(Math.random() * 5)}`);
            }
            return sections.join(', ');
        }
        
        function clearChatHistory() {
            // Clear all messages except the initial bot message
            const messages = chatMessages.querySelectorAll('.message');
            messages.forEach((msg, index) => {
                if (index > 0) msg.remove();
            });
            
            // Show confirmation message
            addMessage('bot', {
                text: "Chat history has been cleared. How can I assist you with the current document?",
                type: 'status'
            });
        }
        
        // UI interaction functions
        window.rateResponse = function(button, isHelpful) {
            if (isHelpful) {
                button.innerHTML = '<i class="fas fa-check"></i> Thank you!';
                button.style.background = '#4CAF50';
                button.style.color = 'white';
            } else {
                button.innerHTML = '<i class="fas fa-times"></i> Noted';
                button.style.background = '#F44336';
                button.style.color = 'white';
            }
            button.disabled = true;
        };
        
        window.followUpSuggestion = function(question) {
            userInput.value = question;
            sendMessage();
        };

        window.handleRareConceptAction = function(concepts) {
            // Show prominent upload prompt
            const uploadPrompt = document.createElement('div');
            uploadPrompt.className = 'upload-prompt';
            uploadPrompt.innerHTML = `
                <div class="prompt-header">
                    <i class="fas fa-file-upload"></i>
                    <h3>Document Upload Recommended</h3>
                </div>
                <div class="prompt-content">
                    <p>The following concepts need more detailed documentation:</p>
                    <ul class="concept-list">
                        ${concepts.map(c => `<li>${c}</li>`).join('')}
                    </ul>
                    <div class="prompt-actions">
                        <button class="input-btn primary" onclick="focusUploadButton()">
                            <i class="fas fa-upload"></i> Upload Document
                        </button>
                        <button class="input-btn" onclick="this.parentElement.parentElement.parentElement.remove()">
                            Not Now
                        </button>
                    </div>
                </div>
            `;
            
            // Insert after chat messages
            chatMessages.parentNode.insertBefore(uploadPrompt, chatMessages.nextSibling);
        };

        window.focusUploadButton = function() {
            // Remove any existing prompts
            document.querySelectorAll('.upload-prompt').forEach(el => el.remove());
            
            // Highlight upload button
            uploadBtn.classList.add('pulse');
            
            // Auto-click the upload button after a delay
            setTimeout(() => {
                uploadBtn.click();
                uploadBtn.classList.remove('pulse');
            }, 500);
        };
    </script>
</body>
</html>