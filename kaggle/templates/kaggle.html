<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crossbar | AI-Powered Company Q&A</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Roboto+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/kaggle.css') }}">
</head>

<body>
    <div class="hex-pattern"></div>
    <div class="bg-elements" id="bg-canvas"></div>

    <nav>
        <div class="logo">
            <div class="logo-icon">
                <div class="logo-icon-inner">C</div>
            </div>
            Crossbar<span>AI</span>
        </div>
        <div class="nav-links">
            <a href="#features">Features</a>
            <a href="#api">Ask Question</a>
            <a href="#results">Results</a>
            <a href="#" id="admin-nav">Admin</a>
        </div>
    </nav>

    <section class="hero">
        <div class="container">
            <h1>Crossbar Knowledge Hub</h1>
            <p>Access company insights instantly with our AI-powered knowledge assistant</p>

            <div class="crypto-container">
                <div class="mascot">
                    <div class="crypto bitcoin" id="bitcoin">
                        <i class="fab fa-bitcoin"></i>
                    </div>
                    <div class="crypto-name">Bitcoin</div>
                </div>
                <div class="mascot">
                    <div class="crypto ethereum" id="ethereum">
                        <i class="fab fa-ethereum"></i>
                    </div>
                    <div class="crypto-name">Ethereum</div>
                </div>
                <div class="mascot">
                    <div class="crypto solana" id="solana">
                        <i class="fas fa-coins"></i>
                    </div>
                    <div class="crypto-name">Solana</div>
                </div>
            </div>

            <button class="cta-button" onclick="document.getElementById('api').scrollIntoView({behavior: 'smooth'})">
                Explore Knowledge
            </button>
        </div>
    </section>

    <section class="api-section" id="api">
        <div class="container">
            <div class="api-container">
                <div class="api-info animate-on-scroll">
                    <h2>Intelligent Q&A System</h2>
                    <p>Ask any question about our operations, products, or services and receive precise answers powered by our AI assistant.</p>
                    <div class="feature-list">
                        <p><i class="fas fa-check-circle" style="color: var(--orange-primary);"></i> Maintains conversation context across sessions</p>
                        <p><i class="fas fa-check-circle" style="color: var(--orange-primary);"></i> Supports document and text context additions</p>
                        <p><i class="fas fa-check-circle" style="color: var(--orange-primary);"></i> Fallback to verified company knowledge base</p>
                    </div>
                </div>

                <div class="glass-panel animate-on-scroll">
                    <div class="model-selector">
                        <label for="modelSelect">Embedding Model:</label>
                        <select id="modelSelect">
                            <option value="text-embedding-3-large" selected>text-embedding-3-large (default)</option>
                            <option value="text-embedding-3-small">text-embedding-3-small</option>
                        </select>
                    </div>

                    <div class="context-actions">
                        <button class="context-btn" id="add-text-context">
                            <i class="fas fa-comment"></i> Add Text Context
                        </button>
                        <button class="context-btn" id="add-file-context">
                            <i class="fas fa-file-upload"></i> Upload File
                        </button>
                        <button class="context-btn" id="debug-vector-btn">
                            <i class="fas fa-bug"></i> Debug Embeddings
                        </button>
                    </div>

                    <div class="input-container">
                        <div class="input-group">
                            <label for="api-key">API Key</label>
                            <input type="password" id="api-key" placeholder="Enter your access key">
                        </div>

                        <div class="input-group">
                            <label for="question">Your Question</label>
                            <input type="text" id="question" placeholder="Ask about the company...">
                        </div>

                        <button class="submit-btn" id="submit-btn">Ask Question <i
                                class="fas fa-arrow-right"></i></button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="results-section" id="results">
        <div class="container">
            <div class="results-header animate-on-scroll">
                <h2><i class="fas fa-brain"></i> AI Analysis Results</h2>
                <p>Answers synthesized from our extensive knowledge base</p>
            </div>

            <div class="results-grid">
                <div class="result-card animate-on-scroll">
                    <h3><i class="fas fa-comments"></i> Comprehensive Answer</h3>
                    <p>Detailed response to your specific query:</p>
                    <div class="kernel-output" id="kernel-answer">
                        // Your answer will appear here after processing
                    </div>

                    <div class="generation-buttons" id="generation-buttons" style="display: none; margin-top:1rem;">
                        <!-- Video: Pixverse -->
                        <button class="generation-btn" onclick="generateFromAnswer('video')">
                            <i class="fas fa-video"></i> Pixverse Video
                        </button>

                        <!-- Poster: Canva -->
                        <button class="generation-btn" onclick="generateFromAnswer('poster')">
                            <i class="fas fa-image"></i> Canva Poster
                        </button>

                        <!-- Slides: Gamma -->
                        <button class="generation-btn" onclick="generateFromAnswer('gamma_slides')">
                            <i class="fas fa-presentation"></i> Gamma Slides
                        </button>

                        <!-- Slides: SlidesGPT -->
                        <button class="generation-btn" onclick="generateFromAnswer('slidesgpt')">
                            <i class="fas fa-chalkboard"></i> SlidesGPT
                        </button>

                        <!-- Memo: OpenAI -->
                        <button class="generation-btn" onclick="generateFromAnswer('memo')">
                            <i class="fas fa-file-alt"></i> OpenAI Memo
                        </button>
                    </div>

                    <div class="answer-actions" id="answer-actions" style="display: none;">
                        <div class="action-group">
                            <span class="action-label">Translate:</span>
                            <button class="action-btn" data-lang="es">Spanish</button>
                            <button class="action-btn" data-lang="fr">French</button>
                            <button class="action-btn" data-lang="de">German</button>
                        </div>

                        <div class="action-group">
                            <span class="action-label">Adjust:</span>
                            <button class="action-btn" data-command="shorten">Shorten</button>
                            <button class="action-btn" data-command="elaborate">Elaborate</button>
                            <button class="action-btn" data-command="reword">Rephrase</button>
                        </div>
                    </div>

                    <div class="follow-up-suggestions" id="follow-up-suggestions" style="display: none;">
                        <h4>Follow-up Questions:</h4>
                        <div class="follow-up-buttons" id="follow-up-buttons">
                            <!-- Follow-up buttons will be added here -->
                        </div>
                    </div>
                </div>

                <div class="result-card animate-on-scroll">
                    <h3><i class="fas fa-history"></i> Conversation History</h3>
                    <div class="kernel-output" id="user-memories">
                        <p>Login to see your saved Q&A memories</p>
                    </div>
                </div>

                <div class="result-card animate-on-scroll">
                    <h3><i class="fas fa-folder-open"></i> File History</h3>
                    <div class="kernel-output" id="file-history">
                        <p>No uploaded files yet.</p>
                    </div>
                </div>

                <div class="result-card animate-on-scroll">
                    <h3><i class="fas fa-download"></i> Download Conversation</h3>
                    <div class="answer-actions">
                        <button class="action-btn" onclick="downloadConversation('txt')">.TXT</button>
                        <button class="action-btn" onclick="downloadConversation('docx')">.DOCX</button>
                        <button class="action-btn" onclick="downloadConversation('pdf')">.PDF</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <p>© 2023 Crossbar AI | Transforming Enterprise Knowledge</p>
    </footer>

    <!-- Context Modals -->
    <div class="modal" id="text-context-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Text Context</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="input-group">
                <label for="context-text">Enter additional context</label>
                <textarea id="context-text" placeholder="Product A is a component used in Product B..."></textarea>
            </div>
            <div class="concepts-container" id="text-concepts" style="display: none;">
                <h4>Key Concepts:</h4>
                <div class="concept-tags" id="text-concept-tags"></div>
            </div>
            <button class="submit-btn" id="submit-text-context">Add Context <i class="fas fa-spinner fa-spin"
                    style="display: none;" id="text-spinner"></i></button>
            <button class="context-btn" id="clear-text-context" style="margin-top: 1rem;">
                <i class="fas fa-eraser"></i> Clear Text
            </button>
        </div>
    </div>

    <div class="modal" id="file-context-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Upload Context File</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="file-upload">
                <input type="file" id="context-files" class="file-input" multiple accept=".txt,.pdf,.doc,.docx,.jpg,.jpeg,.png">
                <label for="context-files" class="file-label" id="file-drop-area">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <span>Choose files or drag them here</span>
                    <small>Supported: PDF, DOC, DOCX, TXT, PPT, PPTX, JPG, PNG, MP4</small>
                </label>
                <div class="multi-file-preview" id="multi-file-preview">
                    <!-- File previews will be added here -->
                </div>
            </div>
            <div class="concepts-container" id="file-concepts" style="display: none;">
                <h4>Key Concepts:</h4>
                <div class="concept-tags" id="file-concept-tags"></div>
            </div>
            <button class="submit-btn" id="submit-file-context">Upload Files <i class="fas fa-spinner fa-spin"
                    style="display: none;" id="file-spinner"></i></button>
        </div>
    </div>

    <!-- Debug Vector Modal -->
    <div class="modal" id="vector-debug-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Embedding Debug Tool</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="input-group">
                <label for="testInput">Test Text</label>
                <textarea id="testInput" placeholder="Enter text to test embedding..."></textarea>
            </div>
            <button class="submit-btn" id="test-vector-btn">Generate Embedding</button>
            <div class="kernel-output" id="vectorOutput" style="margin-top: 20px; max-height: 300px;"></div>
        </div>
    </div>

    <!-- Admin Login Modal -->
    <div class="modal" id="admin-login-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Admin Login</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="input-group">
                <label for="admin-username">Username</label>
                <input type="text" id="admin-username">
            </div>
            <div class="input-group">
                <label for="admin-password">Password</label>
                <input type="password" id="admin-password">
            </div>
            <button class="submit-btn" id="admin-login-btn">Login</button>
        </div>
    </div>

    <!-- Admin Dashboard -->
    <section id="admin-dashboard" style="display:none; padding:2rem">
        <div class="glass-panel">
            <h2>Admin Dashboard</h2>
            <button class="submit-btn" onclick="resetDatabase()">Reset Database</button>
            <div style="margin-top:2rem">
                <h3>Conversation Logs</h3>
                <pre id="admin-conversations" style="max-height:300px; overflow:auto"></pre>
                <h3>Frequent Questions</h3>
                <ul id="frequent-questions"></ul>
            </div>
        </div>
    </section>

    <div id="notification-container"></div>

    <script src="{{ url_for('static', filename='js/kaggle.js') }}"></script>
</body>

</html>